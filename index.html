<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spin & Drink ‚Äì Space Edition</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: Arial, sans-serif;
  background: radial-gradient(circle at top, #000000, #090a0f);
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  overflow: hidden;
}

h1 { text-align:center; font-size:30px; margin-bottom:20px; }

input {
  padding: 10px;
  margin: 6px;
  border-radius: 20px;
  border: none;
  font-size: 16px;
  text-align: center;
  width: 200px;
}

button {
  padding: 14px 28px;
  margin: 10px;
  font-size: 16px;
  border-radius: 30px;
  cursor: pointer;
  background: white;
  color: black;
  font-weight: bold;
  border: none;
}

#wheel {
  width: 250px;
  height: 250px;
  border-radius: 50%;
  background: black;
  border: 8px solid white;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 15px;
  transition: transform 3s cubic-bezier(.17,.67,.32,1.2);
}

#wheelText {
  font-size: 22px;
  font-weight: bold;
  text-align: center;
  padding: 10px;
}

#players {
  margin-top: 12px;
  font-size: 18px;
  font-weight: bold;
}

#result {
  margin-top: 18px;
  font-size: 20px;
  font-weight: bold;
  text-align: center;
  min-height: 28px;
}
</style>
</head>

<body>

<h1> Chill Chill Game  üöÄüç∏</h1>

<div>
  <input id="player1" placeholder="Enter Player 1 Name">
  <input id="player2" placeholder="Enter Player 2 Name">
</div>

<p id="players"></p>

<div id="wheel">
  <span id="wheelText">SPIN</span>
</div>

<button id="spinBtn" onclick="spin()">Play</button>

<!-- PayPal subscription button container (hidden at start) -->
<div id="paypal-button-container-P-9DG208074V137110VNFJ7KVI" style="display:none; margin-top:15px;"></div>

<p id="result"></p>

<!-- Load PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=AQw9Jtyl5FUNn4njKl_9W6M-W66KmCs34UNpIt-mw58k84b9B5IVhwgqHyrv_6d9qfDWIVyK6L6SQVT3&vault=true&intent=subscription"></script>

<script>
const actions = [
  "üç∫Drink 1",
  "üç∫Drink 2",
  "üç∫Drink 3",
  "üç∫Give Drink",
  "üç∫üòöDrink with Kiss",
  "üí¥Pay",
  "üòöKiss",
  "All Drink"
];

let spinCount = localStorage.getItem("spinCount");
spinCount = spinCount ? parseInt(spinCount) : 0;
localStorage.setItem("spinCount", spinCount);

let isSubscribed = localStorage.getItem("isSubscribed") === "true";

document.getElementById("paypal-button-container-P-9DG208074V137110VNFJ7KVI").style.display = "none";

function spin() {
  const p1 = document.getElementById("player1").value.trim();
  const p2 = document.getElementById("player2").value.trim();
  if (!p1 || !p2) {
    alert("Please enter both player names!");
    return;
  }

  document.getElementById("players").innerText = `${p1}  vs  ${p2}`;

  const wheelText = document.getElementById("wheelText");
  const wheel = document.getElementById("wheel");

  document.getElementById("spinBtn").disabled = true;

  const selectedAction = actions[Math.floor(Math.random() * actions.length)];
  const players = [p1, p2];
  const selectedPlayer = players[Math.floor(Math.random() * players.length)];

  const spinDeg = Math.floor(Math.random() * 360) + 1440;
  wheel.style.transform = `rotate(${spinDeg}deg)`;

  spinCount++;
  localStorage.setItem("spinCount", spinCount);

  wheelText.innerText = "‚ú® Spinning...";

  setTimeout(() => {
    wheelText.innerText = selectedAction;
    document.getElementById("result").innerText = `${selectedPlayer} must do ‚Üí ${selectedAction}`;
    document.getElementById("spinBtn").disabled = false;

    // After 100 spins ‚Üí show PayPal subscribe button (only if not subscribed)
    if (spinCount >= 100 && !isSubscribed) {
      document.getElementById("paypal-button-container-P-9DG208074V137110VNFJ7KVI").style.display = "block";
      document.getElementById("result").innerText = "Subscribe to continue playing!";
    }

  }, 3000);
}

/* ===== PAYPAL BUTTON ===== */
paypal.Buttons({
    style: { shape: 'pill', layout: 'vertical', label: 'subscribe' },
    createSubscription: function(data, actions) {
      return actions.subscription.create({ plan_id: 'P-9DG208074V137110VNFJ7KVI' });
    },
    onApprove: function(data, actions) {
      alert("Subscription successful! Game unlocked!");

      // Unlock forever
      spinCount = 0;
      localStorage.setItem("spinCount", 0);
      localStorage.setItem("isSubscribed", "true");
      isSubscribed = true;

      // Hide PayPal button again
      document.getElementById("paypal-button-container-P-9DG208074V137110VNFJ7KVI").style.display = "none";
      document.getElementById("result").innerText = "You can continue playing!";
    }
}).render('#paypal-button-container-P-9DG208074V137110VNFJ7KVI');
</script>

</body>
</html>
